ifndef::snippets[]
:snippets: ./build/generated-snippets
endif::[]

= Bad-request API documentation
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 2
:sectlinks:

== Members

=== 이메일 인증 요청

include::{snippets}/member_send_authentication_mail/http-request.adoc[]
include::{snippets}/member_send_authentication_mail/request-fields.adoc[]
==== 응답

include::{snippets}/member_send_authentication_mail/http-response.adoc[]
include::{snippets}/member_send_authentication_mail/response-fields.adoc[]

=== 회원가입

include::{snippets}/member-signup/http-request.adoc[]
include::{snippets}/member-signup/request-fields.adoc[]
==== 응답

include::{snippets}/member-signup/http-response.adoc[]
include::{snippets}/member-signup/response-fields.adoc[]

=== 로그인한 회원 정보

include::{snippets}/member-loggedInInformation/http-request.adoc[]
include::{snippets}/member-loggedInInformation/request-headers.adoc[]
include::{snippets}/member-loggedInInformation/http-response.adoc[]
include::{snippets}/member-loggedInInformation/response-fields.adoc[]

== Login

=== Bad-Request 로그인

include::{snippets}/login-email/http-request.adoc[]
include::{snippets}/login-email/request-fields.adoc[]
==== 응답

include::{snippets}/login-email/http-response.adoc[]

==== 응답 헤더

include::{snippets}/login-email/response-headers.adoc[]
* Authorization 헤더에는: Access Token(JWT) 응답합니다.
로그인 이후 요청에 Authorization 헤더에 access-token 으로 로그인을 식별
* Access Token 은 발급 후 10분 간 유지됩니다.
* Access Token 이 만료되면 refresh-token 쿠키를 포함해서 토큰을 재발급할 수 있습니다.
* refresh-token 쿠키의 Refresh 토큰은 일주일간 유지됩니다.

include::{snippets}/login-email/response-fields.adoc[]

=== Oauth2 로그인

Google 로그인:: https://www.bad-request.kr/api/v2/oauth/authorization/google?redirect_url=http://localhost:3000/redirect
Kakao 로그인:: https://www.bad-request.kr/api/v2/oauth/authorization/kakao?redirect_url=http://localhost:3000/redirect
Github 로그인:: https://www.bad-request.kr/api/v2/oauth/authorization/github?redirect_url=http:http://localhost:3000/redirect
note:: redirect_uri= 의 리다이렉트되기를 원하는 위치를 지정해야합니다.

- 인증이 완료되면 요청한 리다이랙트 위치로 리다이랙트 하면서 로그인을 할 수 있는 일회용 인증 코드가 파라미터로 응답됩니다.

[source,http]
----
http://localhost:3000/redirect?authentication-code=a5372ebf-5e56-4b78-9900-0b2b2520eff3
----

- 일회용 인증 코드를 이용한 로그인 요청을 할 수 있습니.
- 일회용 인증 코드는 1회만 사용할 수 있습니다.

=== 일회용 인증 코드로 로그인

NOTE:: 일회용 인증 코드로 로그인시 응답 받은 Access Token 으로 차후 요청시 로그인 유지 식별

include::{snippets}/login-oneTimeCode/http-request.adoc[]
==== 요청 파라미터

==== 응답

include::{snippets}/login-oneTimeCode/http-response.adoc[]
include::{snippets}/login-oneTimeCode/response-fields.adoc[]

=== 토큰 재발급

include::{snippets}/login-reissue/http-request.adoc[]
include::{snippets}/login-reissue/request-headers.adoc[]
include::{snippets}/login-reissue/http-response.adoc[]
include::{snippets}/login-reissue/response-headers.adoc[]
include::{snippets}/login-reissue/response-fields.adoc[]

== Questions

=== 질문 생성

include::{snippets}/question-create/http-request.adoc[]
include::{snippets}/question-create/request-headers.adoc[]
include::{snippets}/question-create/request-fields.adoc[]

NOTE:: 이미지파일은 이미지 업로드 API를 사용해서 업로드후(임시저장상태 24시간 이내 삭제) 응답에 id를 질문 생성 요청에 함께 보내면 이미지가 저장완료됩니다. 업로드한 이미지가 없으면 생략가능합니다.
TIP:: API 확인하기: <<질문 게시판 이미지 업로드>>
include::{snippets}/question-create/http-response.adoc[]
include::{snippets}/question-create/response-headers.adoc[]
include::{snippets}/question-create/response-fields.adoc[]

=== 질문 수정
include::{snippets}/question-modify/http-request.adoc[]
include::{snippets}/question-modify/request-headers.adoc[]
include::{snippets}/question-modify/http-response.adoc[]
include::{snippets}/question-modify/response-fields.adoc[]

=== 질문 목록 조회

==== 요청

include::{snippets}/question-list/http-request.adoc[]

==== 응답

include::{snippets}/question-list/http-response.adoc[]
include::{snippets}/question-list/response-fields.adoc[]

==== 인덱스 정렬

- 최신 데이터 순서로 정렬

[source,http]
----
GET /api/v2/questions HTTP/1.1
Host: www.bad-request.kr
----

- 인덱스 정렬시 다음 데이터를 불러오기 위해서는 lastOfIndex 를 사용해야 합니다.

[source,http]
----
https://www.bad-request.kr/api/v2/questions?lastOfIndex=97
----

==== 조회수로 정렬

- 조회수가 많은 순으로 정렬

[source,http]
----
GET /api/v2/questions?sort=view HTTP/1.1
Host: www.bad-request.kr
----

- 조회수로 정렬시 다음 데이터를 불러오기 위해서는 lastOfView 를 사용해야 합니다.

[source,http]
----
https://www.bad-request.kr/api/v2/questions?sort=view&lastOfView=50
----

==== 추천수로 정렬

- 추천수가 많은 순으로 정렬

[source,http]
----
GET /api/v2/questions?sort=recommend HTTP/1.1
Host: www.bad-request.kr
----

- 추천수로 정렬시 다음 데이터를 불러오기 위해서는 lastOfRecommend 를 사용해야 합니다.

[source,http]
----
https://www.bad-request.kr/api/v2/questions?sort=recommend&lastOfRecommend=10
----

==== 사이즈 & 답변유무

[source,http]
----
GET /api/v2/questions?size=10&isAnswered=true HTTP/1.1
Host: www.bad-request.kr
----

- size: 조회할 데이터의 크기
- isAnswered
* true : 답변이완료된 질문 목록
* false : 답변이 완료되지 않은 질문 목록

=== 이미지 업로드
==== 질문 게시판 이미지 업로드
include::{snippets}/image-upload_question/http-request.adoc[]
include::{snippets}/image-upload_question/request-headers.adoc[]
include::{snippets}/image-upload_question/request-parts.adoc[]
include::{snippets}/image-upload_question/http-response.adoc[]
include::{snippets}/image-upload_question/response-fields.adoc[]
